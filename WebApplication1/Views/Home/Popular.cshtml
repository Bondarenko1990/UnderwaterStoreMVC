@using WebApplication1.Models
@model IndexView
@{
    ViewBag.Title = "Популярные товары";
}

<h3>Популярные товары</h3>
<br />

<div id="modDialog" class="modal fade bd-example-modal-lg">
    <div id="dialogContent" class="modal-dialog modal-dialog-centered"></div>
</div>

<div class="menu_items">
    <div class="row">
        <div class="tabloid-item col-xl-3 col-lg-6 d-none d-md-block">
            <div class="marker">
                Хит продаж
            </div>
            <div class="picture">
                @{
                    var item = Model.Chekhly_setkis.FirstOrDefault(p => p.Name == "MARES Сумка Attack Titan");
                }
                @if (item.ImageData != null)
                {
                    <img src="@Url.Action("GetImage", "Chekhly_setki", new { item.Id })" />
                }
                @Html.ActionLink("Быстрый просмотр", "DetailsModal", "Chekhly_setki", new { id = item.Id }, new { @class = "getFastView" })
                @Html.Hidden("RedirectTo", Url.Action("Details", "Chekhly_setki", new { id = item.Id }))
            </div>
            <a class="name" href="@Url.Action("Details", "Chekhly_setki", new { id = item.Id })"><span class="middle">@Html.DisplayFor(modelItem => item.Name)</span></a>
            <a class="price">@Html.DisplayFor(modelItem => item.Price)<span> грн</span><span class="measure">/шт</span></a>
            <div class="addCart">
                @using (Html.BeginForm("AddToCart", "Cart"))
                {
                    @Html.Hidden("returnId", item.Id)
                    @Html.Hidden("returnUrl", "/Home/Index")
                    <input id="cart" type="submit" value="В корзину" />
                }
            </div>
        </div>

        <div class="tabloid-item col-xl-3 col-lg-6 d-none d-md-block">
            <div class="marker">
                Хит продаж
            </div>
            <div class="picture">
                @{
                    var fonar = Model.Fonaris.FirstOrDefault(p => p.Name == "FEREI W155 (жёлтый свет)");
                }
                @if (fonar.ImageData != null)
                {
                    <img src="@Url.Action("GetImage", "Fonari", new { fonar.Id })" />
                }
                @Html.ActionLink("Быстрый просмотр", "DetailsModal", "Fonari", new { id = fonar.Id }, new { @class = "getFastView" })
                @Html.Hidden("RedirectTo", Url.Action("Details", "Fonari", new { id = fonar.Id }))
            </div>
            <a class="name" href="@Url.Action("Details", "Fonari", new { id = fonar.Id })"><span class="middle">@Html.DisplayFor(modelItem => fonar.Name)</span></a>
            <a class="price">@Html.DisplayFor(modelItem => fonar.Price)<span> грн</span><span class="measure">/шт</span></a>
            <div class="addCart">
                @using (Html.BeginForm("AddToCart", "Cart"))
                {
                    @Html.Hidden("returnId", fonar.Id)
                    @Html.Hidden("returnUrl", "/Home/Index")
                    <input id="cart" type="submit" value="В корзину" />
                }
            </div>
        </div>
        <div class="tabloid-item col-xl-3 col-lg-6 d-none d-md-block">
            <div class="marker">
                Хит продаж
            </div>
            <div class="picture">
                @{
                    var trubka = Model.Trubkis.FirstOrDefault(p => p.Name == "CRESSI Corsica камуфляж");
                }
                @if (trubka.ImageData != null)
                {
                    <img src="@Url.Action("GetImage", "Trubki", new { trubka.Id })" />
                }
                @Html.ActionLink("Быстрый просмотр", "DetailsModal", "Trubki", new { id = trubka.Id }, new { @class = "getFastView" })
                @Html.Hidden("RedirectTo", Url.Action("Details", "Trubki", new { id = trubka.Id }))
            </div>
            <a class="name" href="@Url.Action("Details", "Trubki", new { id = trubka.Id })"><span class="middle">@Html.DisplayFor(modelItem => trubka.Name)</span></a>
            <a class="price">@Html.DisplayFor(modelItem => trubka.Price)<span> грн</span><span class="measure">/шт</span></a>
            <div class="addCart">
                @using (Html.BeginForm("AddToCart", "Cart"))
                {
                    @Html.Hidden("returnId", trubka.Id)
                    @Html.Hidden("returnUrl", "/Home/Index")
                    <input id="cart" type="submit" value="В корзину" />
                }
            </div>
        </div>
        <div class="tabloid-item col-xl-3 col-lg-6 d-none d-md-block">
            <div class="marker">
                Хит продаж
            </div>
            <div class="picture">
                @{
                    var rukavitsy = Model.Rukavitsys.FirstOrDefault(p => p.Name == "MARLIN Open Cell 3-х палые 5 мм");
                }
                @if (rukavitsy.ImageData != null)
                {
                    <img src="@Url.Action("GetImage", "Rukavitsy", new { rukavitsy.Id })" />
                }
                @Html.ActionLink("Быстрый просмотр", "DetailsModal", "Rukavitsy", new { id = rukavitsy.Id }, new { @class = "getFastView" })
                @Html.Hidden("RedirectTo", Url.Action("Details", "Rukavitsy", new { id = rukavitsy.Id }))
            </div>
            <a class="name" href="@Url.Action("Details", "Rukavitsy", new { id = rukavitsy.Id })"><span class="middle">@Html.DisplayFor(modelItem => rukavitsy.Name)</span></a>
            <a class="price">@Html.DisplayFor(modelItem => rukavitsy.Price)<span> грн</span><span class="measure">/шт</span></a>
            <div class="addCart">
                @using (Html.BeginForm("AddToCart", "Cart"))
                {
                    @Html.Hidden("returnId", rukavitsy.Id)
                    @Html.Hidden("returnUrl", "/Home/Index")
                    <input id="cart" type="submit" value="В корзину" />
                }
            </div>
        </div>
        <div class="tabloid-item col-xl-3 col-lg-6 d-none d-md-block">
            <div class="marker">
                Хит продаж
            </div>
            <div class="picture">
                @{
                    var komplekt = Model.Komplektys.FirstOrDefault(p => p.Name == "OMER Набор Eagleray+Alien+Zoom в чехле");
                }
                @if (komplekt.ImageData != null)
                {
                    <img src="@Url.Action("GetImage", "Komplekty", new { komplekt.Id })" />
                }
                @Html.ActionLink("Быстрый просмотр", "DetailsModal", "Komplekty", new { id = komplekt.Id }, new { @class = "getFastView" })
                @Html.Hidden("RedirectTo", Url.Action("Details", "Komplekty", new { id = komplekt.Id }))
            </div>
            <a class="name" href="@Url.Action("Details", "Komplekty", new { id = komplekt.Id })"><span class="middle">@Html.DisplayFor(modelItem => komplekt.Name)</span></a>
            <a class="price">@Html.DisplayFor(modelItem => komplekt.Price)<span> грн</span><span class="measure">/шт</span></a>
            <div class="addCart">
                @using (Html.BeginForm("AddToCart", "Cart"))
                {
                    @Html.Hidden("returnId", komplekt.Id)
                    @Html.Hidden("returnUrl", "/Home/Index")
                    <input id="cart" type="submit" value="В корзину" />
                }
            </div>
        </div>
        <div class="tabloid-item col-xl-3 col-lg-6 d-none d-md-block">
            <div class="marker">
                Хит продаж
            </div>
            <div class="picture">
                @{
                    fonar = Model.Fonaris.FirstOrDefault(p => p.Name == "SEAC SUB R20");
                }
                @if (fonar.ImageData != null)
                {
                    <img src="@Url.Action("GetImage", "Fonari", new { fonar.Id })" />
                }
                @Html.ActionLink("Быстрый просмотр", "DetailsModal", "Fonari", new { id = fonar.Id }, new { @class = "getFastView" })
                @Html.Hidden("RedirectTo", Url.Action("Details", "Fonari", new { id = fonar.Id }))
            </div>
            <a class="name" href="@Url.Action("Details", "Fonari", new { id = fonar.Id })"><span class="middle">@Html.DisplayFor(modelItem => fonar.Name)</span></a>
            <a class="price">@Html.DisplayFor(modelItem => fonar.Price)<span> грн</span><span class="measure">/шт</span></a>
            <div class="addCart">
                @using (Html.BeginForm("AddToCart", "Cart"))
                {
                    @Html.Hidden("returnId", fonar.Id)
                    @Html.Hidden("returnUrl", "/Home/Index")
                    <input id="cart" type="submit" value="В корзину" />
                }
            </div>
        </div>
        <div class="tabloid-item col-xl-3 col-lg-6 d-none d-md-block">
            <div class="marker">
                Хит продаж
            </div>
            <div class="picture">
                @{
                    var dly_ohoti = Model.Dlya_podvodnoy_okhotys.FirstOrDefault(p => p.Name == "CRESSI Tracina 9 мм");
                }
                @if (dly_ohoti.ImageData != null)
                {
                    <img src="@Url.Action("GetImage", "Dlya_podvodnoy_okhoty", new { dly_ohoti.Id })" />
                }
                @Html.ActionLink("Быстрый просмотр", "DetailsModal", "Dlya_podvodnoy_okhoty", new { id = dly_ohoti.Id }, new { @class = "getFastView" })
                @Html.Hidden("RedirectTo", Url.Action("Details", "Dlya_podvodnoy_okhoty", new { id = dly_ohoti.Id }))
            </div>
            <a class="name" href="@Url.Action("Details", "Dlya_podvodnoy_okhoty", new { id = dly_ohoti.Id })"><span class="middle">@Html.DisplayFor(modelItem => dly_ohoti.Name)</span></a>
            <a class="price">@Html.DisplayFor(modelItem => dly_ohoti.Price)<span> грн</span><span class="measure">/шт</span></a>
            <div class="addCart">
                @using (Html.BeginForm("AddToCart", "Cart"))
                {
                    @Html.Hidden("returnId", dly_ohoti.Id)
                    @Html.Hidden("returnUrl", "/Home/Index")
                    <input id="cart" type="submit" value="В корзину" />
                }
            </div>
        </div>
        <div class="tabloid-item col-xl-3 col-lg-6 d-none d-md-block">
            <div class="marker">
                Хит продаж
            </div>
            <div class="picture">
                @{
                    var lasti_ohota = Model.Lasty_dlya_okhotys.FirstOrDefault(p => p.Name == "OMER Eagleray");
                }
                @if (lasti_ohota.ImageData != null)
                {
                    <img src="@Url.Action("GetImage", "Lasty_dlya_okhoty", new { lasti_ohota.Id })" />
                }
                @Html.ActionLink("Быстрый просмотр", "DetailsModal", "Lasty_dlya_okhoty", new { id = lasti_ohota.Id }, new { @class = "getFastView" })
                @Html.Hidden("RedirectTo", Url.Action("Details", "Lasty_dlya_okhoty", new { id = lasti_ohota.Id }))
            </div>
            <a class="name" href="@Url.Action("Details", "Lasty_dlya_okhoty", new { id = lasti_ohota.Id })"><span class="middle">@Html.DisplayFor(modelItem => lasti_ohota.Name)</span></a>
            <a class="price">@Html.DisplayFor(modelItem => lasti_ohota.Price)<span> грн</span><span class="measure">/шт</span></a>
            <div class="addCart">
                @using (Html.BeginForm("AddToCart", "Cart"))
                {
                    @Html.Hidden("returnId", lasti_ohota.Id)
                    @Html.Hidden("returnUrl", "/Home/Index")
                    <input id="cart" type="submit" value="В корзину" />
                }
            </div>
        </div>
    </div>
</div>

<script type="text/javascript">

        $(function () {
            $.ajaxSetup({ cache: false });
            $(".getFastView").click(function (e) {

                e.preventDefault();
                $.get(this.href, function (data) {
                    $('#dialogContent').html(data);
                    $('#modDialog').modal('show');
                });
            });
        })
</script>
<script type="text/javascript">
        $(function () {
            $(".picture").on('click', ':not(a.getFastView)', function () {
                var url = $(this).parent().children("#RedirectTo").val();
                window.location.href = url;
            });
        });
</script>

